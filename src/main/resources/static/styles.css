:root{
    --bg:#0b1220;
    --panel:rgba(17,24,39,.72);
    --border:rgba(148,163,184,.16);
    --text:#e5e7eb;
    --muted:rgba(229,231,235,.65);
    --muted2:rgba(229,231,235,.45);

    --green:#22c55e;
    --red:#ef4444;
    --blue:#60a5fa;
    --amber:#f59e0b;

    --radius:14px;
    --shadow:0 10px 30px rgba(0,0,0,.35);
    --mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
    --sans:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
}

/* ===== Base ===== */
*{ box-sizing:border-box; }
html, body{ height:100%; }

body{
    margin:0;
    font-family:var(--sans);
    color:var(--text);
    background:
            radial-gradient(1200px 500px at 20% -10%, rgba(96,165,250,.20), transparent 60%),
            radial-gradient(1000px 600px at 90% 0%, rgba(34,197,94,.14), transparent 55%),
            radial-gradient(900px 650px at 40% 120%, rgba(245,158,11,.10), transparent 55%),
            var(--bg);
    overflow-x:hidden;
}

.wrap{
    max-width:1160px;
    margin:0 auto;
    padding:10px 16px 40px;
}

.muted{ color:rgba(229,231,235,.45); }

/* ===== Topbar ===== */
.topbar{
    position:sticky;
    top:0;
    z-index:10;
    backdrop-filter:blur(10px);
    -webkit-backdrop-filter:blur(10px);
    background:linear-gradient(to bottom, rgba(11,18,32,.92), rgba(11,18,32,.62));
    border-bottom:1px solid rgba(148,163,184,.12);
}

.topbarInner{
    max-width:1160px;
    margin:0 auto;
    padding:14px 16px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
}

.brand{
    display:flex;
    align-items:center;
    gap:10px;
    min-width:220px;
}
.logo{
    width:34px;
    height:34px;
    border-radius:10px;
    background:linear-gradient(135deg, rgba(96,165,250,.9), rgba(34,197,94,.85));
    box-shadow:0 8px 18px rgba(0,0,0,.35);
}
.brandText{
    display:flex;
    flex-direction:column;
    line-height:1.35;
}
.brandText .title{
    font-weight:650;
    letter-spacing:.2px;
    font-size:15px;
}
.brandText .sub{
    font-size:12px;
    color:var(--muted2);
}

.rightStatus{
    display:flex;
    align-items:center;
    gap:10px;
    min-width:220px;
    justify-content:flex-end;
}
.badge{
    display:inline-flex;
    align-items:center;
    gap:8px;
    padding:8px 12px;
    border-radius:999px;
    border:1px solid rgba(148,163,184,.16);
    background:rgba(15,23,42,.55);
    color:var(--muted);
    font-size:13px;
}
.meta{
    font-size:12px;
    color:var(--muted2);
    font-family:var(--mono);
}

/* Status dot */
.dot{
    width:8px;
    height:8px;
    border-radius:999px;
    background:var(--blue);
    box-shadow:0 0 0 4px rgba(96,165,250,.12);
}
.dot.ok{ background:var(--green); box-shadow:0 0 0 4px rgba(34,197,94,.14); }
.dot.err{ background:var(--red);   box-shadow:0 0 0 4px rgba(239,68,68,.14); }
.dot.fetch{ background:var(--amber); box-shadow:0 0 0 4px rgba(245,158,11,.14); }

/* ===== Panel ===== */
.panel{
    margin-top:8px;
    margin-bottom:15px;
    border-radius:var(--radius);
    border:1px solid var(--border);
    background:linear-gradient(180deg, var(--panel), rgba(2,6,23,.55));
    box-shadow:var(--shadow);
    overflow:hidden;
}
.panelHeader{
    padding:8px 16px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    border-bottom:1px solid rgba(148,163,184,.10);
    background:linear-gradient(180deg, rgba(15,23,42,.55), rgba(15,23,42,.25));
}
.panelHeader .left{
    display:flex;
    align-items:center;
    gap:10px;
    flex-wrap:wrap;
}
.panelHeader .right{
    display:flex;
    align-items:center;
    gap:10px;
    color:var(--muted2);
    font-size:12px;
}

/* Chip */
.chip{
    font-size:12px;
    color:rgba(229,231,235,.75);
    border:1px solid rgba(148,163,184,.14);
    background:rgba(2,6,23,.35);
    padding:6px 10px;
    border-radius:999px;
    font-family:var(--mono);
}

/* Input */
.input{
    display:flex;
    align-items:center;
    gap:5px;
    padding:6px 15px;
    border-radius:9px;
    border:1px solid var(--border);
    background:rgba(2,6,23,.45);
    box-shadow:inset 0 1px 0 rgba(255,255,255,.03);
}
.input select{
    width:100%;
    background:transparent;
    border:0;
    outline:none;
    color:var(--text);
    font-size:14px;
    font-family:var(--sans);
    appearance:none;
}

/* Small hint pill */
.hint{
    font-family:var(--mono);
    font-size:12px;
    color:var(--muted2);
    padding:4px 8px;
    border-radius:10px;
    border:1px solid rgba(148,163,184,.12);
    background:rgba(15,23,42,.55);
}

/* ===== Table (global) ===== */
table{
    width:100%;
    border-collapse:collapse;
}
thead th{
    text-align:left;
    font-size:11px;
    color:rgba(229,231,235,.55);
    letter-spacing:.14em;
    text-transform:uppercase;
    padding:12px 14px;
    border-bottom:1px solid rgba(148,163,184,.10);
    background:rgba(2,6,23,.30);
    position:sticky;
    top:40px;
    z-index:5;
    backdrop-filter:blur(8px);
    -webkit-backdrop-filter:blur(8px);
    white-space:nowrap;
}
tbody td{
    padding:8px 12px;
    border-bottom:1px solid rgba(148,163,184,.08);
    font-size:14px;
    white-space:nowrap; /* default: keep market tables compact */
}
tbody tr:hover{
    background:rgba(96,165,250,.06);
}
.num{
    text-align:right;
    font-variant-numeric:tabular-nums;
    font-family:var(--mono);
}

/* Pills */
.pill{
    display:inline-flex;
    align-items:center;
    gap:8px;
    padding:6px 10px;
    border-radius:999px;
    border:1px solid rgba(148,163,184,.14);
    background:rgba(15,23,42,.45);
    font-size:12px;
    color:rgba(229,231,235,.80);
    font-family:var(--mono);
}
.exDot{
    width:8px;
    height:8px;
    border-radius:999px;
    background:rgba(96,165,250,.85);
}
.exDot.ok{
    background:rgba(34,197,94,.95);
    box-shadow:0 0 0 4px rgba(34,197,94,.14);
}
.exDot.err{
    background:rgba(239,68,68,.95);
    box-shadow:0 0 0 4px rgba(239,68,68,.14);
}

.footerNote{
    padding:12px 16px;
    color:rgba(229,231,235,.45);
    font-size:12px;
    font-family:var(--mono);
    background:rgba(2,6,23,.30);
}

/* ===== Chart ===== */
.chartWrap{ padding:14px 16px 40px; }
.chartBox{
    width:100%;
    height:450px;
    border-radius:14px;
    border:1px solid rgba(148,163,184,.12);
    background:rgba(2,6,23,.35);
    overflow:hidden;
}

/* ===== Candlestick interval buttons ===== */
#aggPanel{ position:relative; }
#chipBase{ display:none; }

.aggIntervalBar{
    position:absolute;
    right:16px;
    bottom:8px;
    display:flex;
    gap:8px;
    z-index:6;
}
.intervalBtn{
    cursor:pointer;
    user-select:none;
    border:1px solid rgba(148,163,184,.12);
}
.intervalBtn.is-active{
    color:var(--text);
    border-color:rgba(96,165,250,.35);
    background:rgba(15,23,42,.78);
}
.intervalBtn:active{ transform:translateY(1px); }
.intervalBtn:focus{
    outline:none;
    box-shadow:0 0 0 3px rgba(96,165,250,.18);
}

/* ===== AI News Links ===== */
.news-link a{
    color:#fff;
    text-decoration:none;
}
.news-link a:hover{
    text-decoration:underline;
    opacity:.9;
}

/* ===== AI News table layout (fixed columns + wrap) ===== */
#newsPanel table{
    table-layout:fixed;
    width:100%;
}

/* Override global nowrap ONLY for AI panel cells */
#newsPanel tbody td{
    white-space:normal !important;
    overflow:visible !important;
    text-overflow:clip !important;
    vertical-align:top;
}

/* Column widths: Date | Analysis | News Links */
#newsPanel th:nth-child(1),
#newsPanel td:nth-child(1){
    width:16%;
    white-space:nowrap;
    font-family:var(--mono);
    overflow:hidden;
    text-overflow:ellipsis;
}

#newsPanel th:nth-child(2),
#newsPanel td:nth-child(2){
    width:44%;
    white-space:normal;
    line-height:1.6;
    overflow-wrap:anywhere;
    word-break:break-word;
}

#newsPanel th:nth-child(3),
#newsPanel td:nth-child(3){
    width:40%;
    white-space:normal;
    line-height:1.5;
}

/* Cell-specific helpers */
#newsPanel .newsAnalysisCell{
    white-space:normal !important;
    word-break:break-word;
    line-height:1.6;
}
#newsPanel .newsLinksCell{
    white-space:normal !important;
    word-break:break-word;
}
#newsPanel .news-link{ margin-bottom:6px; }

/* ===== Responsive ===== */
@media (max-width:980px){
    .brand{ min-width:auto; }
    .rightStatus{ min-width:auto; }
    thead th{ top:72px; }
}